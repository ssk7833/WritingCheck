"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e){t.exports.textStatistics=function(t){for(var e=t.replace(/\r\n/g,"\n"),n=e.replace(/\n/g,""),r=e.match(/[\u4e00-\u9fa5]/g)||[],o=e.match(/\b\w+\b/g)||[],a=e.match(/\b\d+\b/g)||[],c=n.match(/[|\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\.|\>|\/|\?]/g)||[],u=0,l=0;l<n.length;l++)n.charAt(l).match(/[^\x00-\xff]/)&&u++;var i=(n.match(/[A-Za-z]/g)||[]).length,s=(n.match(/[0-9]/g)||[]).length,f=0,g=e.split("\n");for(l=0;l<g.length;l++)0<g[l].length&&f++;return{total:n.length,c_total:r.length,c_punctuation:u-r.length,e_total:i,e_punctuation:c.length,e_words:o.length-a.length,n_words:a.length,n_total:s,paragraph:f}},t.exports.uuidv4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}},function(t,e,n){n.r(e);var r=n(0),o=location.pathname.substr(location.pathname.lastIndexOf("/")+1),a="https://script.google.com/macros/s/AKfycbzQSIOYdVLNpLVGstEpi5xCLa05fD1NQojL3BQCZ793F9j5E5-Y/exec",c=document.querySelector(".author"),u=document.querySelector(".textInputArea");function l(t){var e=Object(r.textStatistics)(t);document.querySelector(".textStatistics").innerHTML=e.total}if("view.html"===o){var i=location.search.substring(1);$.ajax({url:a,cache:!1,type:"POST",data:{action:"view",query:i},error:function(t){alert("Ajax request error")},success:function(t){!0===t.ok?(c.innerHTML=t.author,u.innerHTML=t.content.replace(/\n/g,"<br>"),l(t.content)):u.innerHTML="發生錯誤！"}})}else{c.value=localStorage.getItem("writingCheckAuthor"),u.value=localStorage.getItem("writingCheckContent"),u.onkeyup=function(){localStorage.setItem("writingCheckContent",u.value),l(u.value)},c.onkeyup=function(){localStorage.setItem("writingCheckAuthor",c.value)},u.onpaste=function(t){setTimeout(function(){localStorage.setItem("writingCheckContent",u.value),l(u.value)},100)},l(u.value);var s=document.querySelector(".submit"),f=s.innerHTML;s.addEventListener("click",function(){0!==u.value.length?0!==c.value.length?!1===s.classList.contains("disabled")&&$.ajax({url:a,cache:!1,type:"POST",data:{action:"submit",author:c.value,content:u.value},beforeSend:function(){s.classList.add("disabled"),s.innerHTML="上傳中"},complete:function(){s.classList.remove("disabled"),s.innerHTML=f},error:function(t){alert("Ajax request error")},success:function(t){!0===t.ok?alert("上傳成功！"):alert("發生錯誤！")}}):alert("未填寫作者"):alert("未填寫內文")}),document.querySelector(".clear").addEventListener("click",function(){!0===confirm("確定清空內容？")&&(c.value="",u.value="",localStorage.setItem("writingCheckContent",""),l(""),localStorage.setItem("writingCheckAuthor",""))})}}]);